const coinPrice=33e-5;class App{constructor(e){this.ee=e,this.discordID=null,this.bindCustomEvents(),this.bindEvents(),this.discordOauth()}bindEvents(){const t=this;$("#formControlRange").on("change",function(){var e=parseInt($(this).val(),10);t.ee.emit("changed",e)}),$("#inputCoins").on("change",function(){var e=parseInt($(this).val(),10);t.ee.emit("changed",e)}),$("#inputEthereum").on("change",function(){var e=parseFloat($(this).val()),e=parseInt(e/coinPrice,10);t.ee.emit("changed",e)}),$("#submitBtn").on("click",function(e){e.preventDefault(),setTimeout(function(){console.log("Callback 1: this is a msg from call back")})})}bindCustomEvents(){this.ee.on("changed",function(e){let t=e;var e=(t=t&&!isNaN(t)?t:100).toString(),n=(coinPrice*t).toString();$("#formControlRange").val(e),$("#inputCoins").val(e),$("#inputEthereum").val(n)}),this.ee.on("step1",function(){$(".step1").show().addClass("fadeIn")}),this.ee.on("step2",function(){$(".step2").show().addClass("fadeIn")})}discordOauth(){const e=new URLSearchParams(window.location.hash.slice(1));var[t,n]=[e.get("access_token"),e.get("token_type")];t?this.ee.emit("step2"):this.ee.emit("step1"),fetch("https://discord.com/api/users/@me",{headers:{authorization:n+" "+t}}).then(e=>e.json()).then(e=>{e=e.id;this.discordID=e}).catch(console.error)}}class EventEmitter{constructor(){this.events={}}on(e,t){return"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){"object"==typeof this.events[e]&&-1<(t=this.events[e].indexOf(t))&&this.events[e].splice(t,1)}emit(e,...t){"object"==typeof this.events[e]&&this.events[e].forEach(e=>e.apply(this,t))}once(e,t){const n=this.on(e,(...e)=>{n(),t.apply(this,e)})}}const ee=new EventEmitter;new App(ee);